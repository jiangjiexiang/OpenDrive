<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>OpenDRIVE visualization</title>
<style>
  body { font-family: Inter, Arial, sans-serif; padding:16px; margin:0; background:#f6f8fb; display:flex; justify-content:center; align-items:center; min-height:100vh; }
  .container { display:flex; gap:18px; align-items:center; max-width:calc(100vw - 32px); width:60%; padding:8px; box-sizing:border-box; }
  .canvas { background: white; border-radius:8px; box-shadow:0 6px 18px rgba(20,30,50,0.08); padding:8px; display:flex; flex-direction:column; align-items:center; width:100%; max-width: calc(100vw - 360px); }
  svg { display:block; width:100%; max-width:100%; height:auto; }
  .toolbar { margin-bottom:8px; display:flex; gap:8px; align-self:flex-start; }
  button.tool { padding:6px 10px; border-radius:6px; border:1px solid #d0d7e6; background:#fff; cursor:pointer; }
  .info { width:300px; padding:12px; border-radius:8px; background:#fff; box-shadow:0 6px 18px rgba(20,30,50,0.06); font-size:13px; }
  .info h4 { margin:0 0 8px 0; font-size:15px }
  .road-poly { transition: fill 160ms ease, stroke 160ms ease; }
  .road-poly:hover { fill:#d7eaff; stroke:#669; }
  .road-poly.selected { stroke:#222 !important; stroke-width:2 !important; fill:#fff3bf !important; }
  .xodr-object.selected { stroke:#000 !important; stroke-width:1.6 !important; }
  .road-line { pointer-events:none; }
  .junction { cursor:default }
  .jlabel { font-family: Arial, sans-serif; pointer-events:none }
</style>
</head>
<body>
<div class="container">
  <div class="canvas">
    <div class="toolbar">
      <button class="tool" id="zoom-in">Zoom In</button>
        <button class="tool" id="zoom-out">Zoom Out</button>
        <button class="tool" id="reset-view">Reset</button>
    </div>
    <svg id="map-svg" width="100%" height="auto" viewBox="0 0 800 700" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" version="1.1">
      <g id="map-layer">
<polygon class="road-poly" data-road-id="0" data-road-name="Road 0" points="735.13,443.17 734.74,438.2 735.41,442.81 733.45,431.53 730.3,424.48 725.63,418.33 718.28,412.42 702.13,401.91 740.41,343.34 759.39,355.79 776.19,369.96 790.51,388.83 800.17,410.46 804.2,430.01 804.62,434.64 804.87,437.4" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 0 Road 0</title></polygon><polygon class="road-poly" data-road-id="1" data-road-name="Road 1" points="251.23,579.32 251.31,579.33 267.51,580.36 267.51,580.33 283.87,581.38 300.21,582.46 316.52,583.57 332.82,584.7 332.93,584.72 349.1,585.89 349.1,585.86 365.45,587.05 381.78,588.26 398.08,589.51 414.37,590.78 442.62,609.43 414.39,590.79 408.89,660.55 380.65,641.91 408.9,660.54 392.7,659.28 376.5,658.03 360.32,656.83 344.17,655.66 344.17,655.69 327.83,654.5 327.94,654.5 311.72,653.38 295.52,652.27 279.33,651.2 263.17,650.17 263.17,650.2 246.84,649.15 246.92,649.16" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 1 Road 1</title></polygon><polygon class="road-poly" data-road-id="2" data-road-name="Road 2" points="359.79,270.82 358.42,292.16 357.06,313.49 355.69,334.83 285.86,330.36 287.23,309.02 288.6,287.68 289.96,266.35" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 2 Road 2</title></polygon><polygon class="road-poly" data-road-id="3" data-road-name="Road 3" points="660.78,608.88 674.52,608.68 673.23,609.33 687.63,608.84 702.51,606.7 712.15,604.82 710.16,605.04 710.18,605.87 726.19,597.29 738.13,599.01 724.4,601.38 727.09,599.23 768.87,655.35 761.36,660.8 736.32,668.96 745.57,664.52 740.45,668.95 728.95,672.44 727.06,673.19 713.7,675.77 693.78,678.54 673.06,679.3 671.79,678.6 662.09,678.84" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 3 Road 3</title></polygon><polygon class="road-poly" data-road-id="4" data-road-name="Road 4" points="202.57,519.06 185.48,518.43 168.35,517.76 151.26,517.06 154.14,447.14 171.15,447.84 188.13,448.51 205.14,449.13" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 4 Road 4</title></polygon><polygon class="road-poly" data-road-id="5" data-road-name="Road 5" points="247.01,649.17 230.43,648.19 230.43,648.15 214.06,647.18 197.65,646.26 181.22,645.38 164.77,644.52 164.82,644.54 148.41,643.71 131.77,642.86 120.95,642.1 120.59,642.26 103.26,640.96 86.15,639.19 74.92,637.86 83.15,568.37 93.78,569.63 109.49,571.27 125.06,572.43 124.72,572.23 135.85,573.01 151.96,573.83 168.29,574.66 168.34,574.64 184.91,575.51 201.49,576.39 218.09,577.33 234.72,578.31 234.72,578.35 251.14,579.32" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 5 Road 5</title></polygon><polygon class="road-poly" data-road-id="6" data-road-name="Road 6" points="503.06,465.17 512.21,465.88 512.17,465.88 534.4,467.59 556.62,469.25 571.43,470.35 571.42,470.34 592.93,471.91 614.44,473.49 635.95,475.07 657.45,476.64 678.96,478.22 673.85,548.0 652.34,546.42 630.83,544.85 609.33,543.27 587.82,541.7 566.33,540.12 566.31,540.13 551.43,539.03 529.11,537.36 506.8,535.65 506.76,535.64 497.65,534.93" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 6 Road 6</title></polygon><polygon class="road-poly" data-road-id="7" data-road-name="Road 7" points="108.86,223.5 102.35,222.96 91.95,224.08 91.87,222.72 92.5,222.93 90.93,223.46 88.08,225.23 84.4,227.81 91.52,220.88 81.24,233.42 80.24,232.5 80.81,232.24 80.05,233.74 79.25,237.02 78.41,241.45 79.13,239.42 77.46,259.55 75.86,278.7 74.26,297.85 4.53,292.02 6.13,272.88 7.73,253.73 9.26,235.57 8.9,233.38 11.09,221.19 14.89,208.23 21.77,194.69 32.72,181.14 33.72,182.07 33.83,181.29 40.29,173.5 50.38,166.29 62.17,159.68 76.57,154.8 93.91,152.78 93.97,154.14 100.31,153.02 113.14,153.66" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 7 Road 7</title></polygon><polygon class="road-poly" data-road-id="8" data-road-name="Road 8" points="253.74,131.33 253.11,133.58 253.66,136.28 250.36,152.13 244.51,165.86 239.37,174.88 238.22,176.04 228.31,190.37 221.35,195.86 225.13,194.53 210.07,210.31 197.08,218.38 182.77,223.79 169.14,226.19 153.34,227.18 150.23,226.0 130.34,224.82 108.87,223.5 113.15,153.67 134.62,154.98 157.67,156.43 154.6,157.22 161.42,156.65 164.53,156.24 166.1,155.65 167.53,154.76 164.88,158.95 165.04,154.32 175.15,144.88 181.03,135.73 180.41,137.21 181.71,135.01 183.65,131.0 184.2,127.87 183.21,130.41 184.71,119.89" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 8 Road 8</title></polygon><polygon class="road-poly" data-road-id="9" data-road-name="Road 9" points="74.6,637.75 64.24,636.34 59.51,634.85 57.24,635.23 42.5,630.56 31.67,624.73 65.75,563.62 70.16,566.29 72.07,566.85 70.13,565.69 77.64,567.67 83.5,568.34" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 9 Road 9</title></polygon><polygon class="road-poly" data-road-id="10" data-road-name="Road 10" points="74.28,297.56 73.13,312.98 73.03,312.82 71.39,335.35 1.6,330.25 3.27,307.4 3.39,307.25 4.51,292.32" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 10 Road 10</title></polygon><polygon class="road-poly" data-road-id="11" data-road-name="Road 11" points="659.67,678.8 640.29,677.82 620.9,676.84 601.52,675.86 581.92,674.87 562.94,673.67 562.93,673.87 543.23,672.63 523.69,671.16 504.28,669.46 484.95,667.64 484.74,667.54 466.3,665.69 454.65,664.58 454.75,664.54 437.58,662.93 420.34,661.46 408.8,660.52 414.48,590.78 426.19,591.73 443.82,593.24 461.48,594.89 461.57,594.95 473.14,596.05 492.02,597.95 491.79,598.0 510.62,599.77 529.38,601.42 548.06,602.83 566.6,604.0 566.61,603.8 585.88,605.01 605.05,605.98 624.43,606.96 643.82,607.94 663.2,608.92" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 11 Road 11</title></polygon><polygon class="road-poly" data-road-id="12" data-road-name="Road 12" points="703.27,405.08 688.1,396.56 680.56,389.82 675.61,390.59 651.93,370.65 634.13,346.28 622.55,318.41 617.91,289.98 618.43,271.21 619.15,254.75 620.2,252.58 622.41,233.92 624.81,213.93 627.21,193.94 629.61,173.96 631.87,155.32 632.15,147.56 629.91,128.86 633.21,130.9 631.83,126.91 628.66,119.93 623.97,113.88 617.99,109.09 610.43,105.59 601.48,103.75 588.61,100.77 604.41,32.61 617.29,35.59 634.08,39.73 655.12,49.78 673.84,64.8 688.56,83.75 698.48,105.6 703.16,132.67 699.61,134.95 701.92,142.29 701.62,160.97 699.08,182.3 696.68,202.29 694.28,222.27 691.88,242.26 689.3,263.57 688.81,261.26 688.34,274.05 687.67,284.54 689.88,299.38 695.12,311.98 703.16,322.99 712.91,331.39 711.18,326.91 726.71,338.21 737.16,343.87" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 12 Road 12</title></polygon><polygon class="road-poly" data-road-id="13" data-road-name="Road 13" points="592.59,102.32 575.15,100.42 575.18,100.1 559.43,98.4 543.38,97.03 527.11,96.0 510.69,95.15 537.17,84.87 510.44,95.27 493.78,94.47 493.77,94.57 476.54,93.75 459.4,92.8 442.33,91.72 425.4,90.59 430.06,20.77 446.86,21.9 463.54,22.95 480.15,23.87 496.69,24.66 496.69,24.56 513.79,25.38 487.3,35.79 513.79,25.25 531.12,26.15 548.57,27.25 566.19,28.76 584.03,30.69 583.99,31.01 600.13,32.75" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 13 Road 13</title></polygon><polygon class="road-poly" data-road-id="15" data-road-name="Road 15" points="676.4,513.11 699.17,512.24 721.19,506.38 741.37,495.8 741.45,495.75 751.43,487.44 759.56,477.31 765.51,465.75 769.04,453.25 770.0,440.29 804.89,442.88 803.49,459.32 798.06,478.57 788.91,496.36 776.39,511.96 763.81,522.66 757.62,526.79 733.89,538.98 704.37,546.84 677.73,548.07" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 15 Road 15</title></polygon><polygon class="road-poly" data-road-id="16" data-road-name="Road 16" points="675.08,478.15 693.97,477.64 708.49,473.78 725.12,464.82 719.09,468.85 726.47,462.93 730.22,458.26 732.96,452.93 734.58,447.17 735.11,437.7 770.0,440.28 769.04,453.24 765.51,465.75 759.57,477.3 751.43,487.44 741.45,495.75 741.37,495.8 721.19,506.38 699.18,512.24 676.41,513.11" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 16 Road 16</title></polygon><polygon class="road-poly" data-road-id="19" data-road-name="Road 19" points="747.98,627.29 753.47,621.28 757.56,614.23 760.05,606.47 762.57,594.33 761.23,594.14 761.73,582.06 761.73,582.05 754.78,562.63 761.25,561.46 758.0,549.55 752.1,538.69 743.88,529.48 733.77,522.38 722.3,517.79 702.4,512.38 701.9,514.98 689.15,514.04 676.4,513.11 678.96,478.22 691.71,479.15 697.55,480.26 707.18,477.72 732.93,484.46 750.43,491.62 767.14,503.34 780.72,518.57 790.46,536.5 795.23,569.82 789.76,561.82 794.67,570.27 796.68,583.5 796.14,591.76 797.39,597.66 793.98,615.01 789.53,628.44 781.68,641.97 773.81,650.88" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 19 Road 19</title></polygon><polygon class="road-poly" data-road-id="20" data-road-name="Road 20" points="676.4,513.11 689.15,514.04 701.9,514.98 720.41,524.09 722.3,517.79 733.77,522.38 743.88,529.48 752.1,538.69 758.0,549.55 761.25,561.46 764.36,581.85 761.73,582.06 761.23,594.14 756.78,605.72 760.05,606.47 757.56,614.23 753.47,621.28 747.98,627.29 722.14,603.7 725.26,600.58 725.59,600.01 725.21,609.65 721.96,602.39 726.99,586.98 727.82,573.43 729.38,582.66 726.93,568.22 725.54,562.59 723.49,558.82 720.63,555.62 717.11,553.15 726.74,552.5 715.62,558.75 691.19,548.28 686.6,548.93 673.85,548.0" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 20 Road 20</title></polygon><polygon class="road-poly" data-road-id="23" data-road-name="Road 23" points="747.98,627.29 753.47,621.28 757.56,614.23 760.05,606.47 762.57,594.33 761.23,594.14 761.73,582.06 761.73,582.05 762.78,560.91 762.63,560.91 763.67,539.76 764.9,518.63 766.31,497.51 767.8,476.4 767.86,476.4 768.8,463.98 769.29,457.37 767.12,440.4 801.82,435.95 804.19,454.88 803.69,466.6 802.74,479.19 802.7,478.97 801.21,499.91 799.82,520.81 798.61,541.64 797.58,562.39 797.73,562.4 796.67,583.79 796.68,583.5 796.14,591.76 797.39,597.66 793.98,615.01 789.53,628.44 781.68,641.97 773.81,650.88" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 23 Road 23</title></polygon><polygon class="road-poly" data-road-id="24" data-road-name="Road 24" points="722.14,603.7 725.26,600.58 725.59,600.01 726.13,597.94 727.74,591.0 726.33,596.52 726.77,580.63 726.79,580.32 727.82,559.43 727.67,559.42 728.74,537.88 729.98,516.46 731.41,495.11 732.91,473.83 732.99,473.61 733.91,461.36 734.4,459.86 732.42,444.85 767.12,440.4 769.29,457.37 768.8,463.98 767.86,476.4 767.8,476.4 766.31,497.51 764.9,518.63 763.67,539.76 762.63,560.91 762.78,560.91 761.73,582.05 761.73,582.06 761.23,594.14 762.57,594.33 760.05,606.47 757.56,614.23 753.47,621.28 747.98,627.29" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 24 Road 24</title></polygon><polygon class="road-poly" data-road-id="29" data-road-name="Road 29" points="36.49,332.8 35.12,355.66 34.3,370.86 34.34,370.86 33.8,381.7 33.8,381.7 34.21,393.66 33.37,393.66 34.37,411.56 37.62,429.2 40.52,440.8 40.84,440.72 42.0,444.64 48.85,454.72 46.05,456.12 50.88,463.85 57.35,470.27 65.13,475.03 73.79,477.87 85.73,480.3 85.9,479.06 103.76,479.9 103.77,479.9 117.95,480.55 132.13,481.17 132.13,481.2 152.7,482.1 151.18,517.05 130.55,516.15 130.51,516.12 116.38,515.5 102.17,514.85 102.13,514.84 86.7,514.04 82.3,515.12 65.11,511.76 50.45,506.78 35.76,497.8 23.54,485.68 11.9,463.7 15.85,466.35 11.63,462.0 8.22,453.34 6.83,450.25 3.38,436.4 -0.37,415.71 -1.61,393.97 -0.75,392.41 -1.17,382.91 -1.14,379.96 -0.61,369.26 -0.64,369.07 0.19,353.64 1.57,330.69" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 29 Road 29</title></polygon><polygon class="road-poly" data-road-id="30" data-road-name="Road 30" points="152.7,482.1 132.13,481.2 117.95,480.55 103.77,479.9 103.76,479.9 85.9,479.06 74.48,474.82 73.79,477.87 65.13,475.03 57.35,470.27 50.88,463.85 46.05,456.12 40.84,445.1 42.0,444.64 40.84,440.72 38.43,429.0 37.62,429.2 34.37,411.56 33.37,393.66 33.46,381.7 33.8,381.7 34.34,370.86 35.22,355.67 35.12,355.66 36.49,332.8 71.42,334.91 70.05,357.6 70.16,357.45 69.27,372.77 68.67,384.52 68.43,382.94 68.34,392.6 69.11,407.41 71.69,421.26 72.12,419.55 74.95,432.92 76.99,444.68 73.83,433.47 76.89,439.6 78.22,442.02 78.94,442.74 79.81,443.27 73.01,442.89 77.91,440.0 91.88,444.59 105.41,444.95 105.39,444.96 119.55,445.61 133.69,446.25 154.22,447.15" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 30 Road 30</title></polygon><polygon class="road-poly" data-road-id="34" data-road-name="Road 34" points="48.71,594.18 47.4,593.22 42.32,589.37 42.52,589.13 38.86,584.14 38.03,584.87 34.38,579.89 31.86,574.24 30.61,568.19 30.0,562.03 30.44,562.0 30.53,551.98 30.53,551.97 31.72,541.89 30.81,541.83 33.0,526.79 37.59,512.31 41.44,502.92 41.77,503.07 42.31,501.92 48.84,494.73 46.9,493.37 51.58,487.8 57.36,483.4 63.97,480.36 71.08,478.85 80.75,477.87 80.79,478.82 103.76,479.9 103.77,479.9 117.95,480.55 132.13,481.17 132.13,481.2 152.7,482.1 151.18,517.05 130.55,516.15 130.51,516.12 116.38,515.5 102.17,514.85 102.13,514.84 77.72,513.67 80.83,512.86 76.22,513.45 74.99,513.57 75.37,513.39 75.71,513.14 79.43,506.24 79.68,511.24 69.01,524.54 68.04,526.18 73.31,517.33 70.58,523.97 67.1,534.63 65.67,544.78 66.69,542.85 65.28,556.07 65.52,552.3 65.38,563.86 64.97,561.1 65.19,562.91 65.16,563.5 64.63,562.32 62.11,559.48 62.94,558.76 71.7,569.82 64.83,562.58 68.43,565.27 69.32,565.91" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 34 Road 34</title></polygon><polygon class="road-poly" data-road-id="35" data-road-name="Road 35" points="152.7,482.1 132.13,481.2 117.95,480.55 103.77,479.9 103.76,479.9 80.79,478.82 71.37,481.2 71.08,478.85 63.97,480.36 57.36,483.4 51.58,487.8 46.9,493.37 41.49,501.44 42.31,501.92 41.77,503.07 38.44,512.65 37.59,512.31 33.0,526.79 30.81,541.83 30.17,551.95 30.53,551.98 30.44,562.0 31.7,568.07 30.61,568.19 31.86,574.24 34.38,579.89 38.03,584.87 42.21,589.44 42.52,589.13 47.87,592.59 47.4,593.22 48.71,594.18 28.1,622.45 16.48,609.59 25.37,619.38 25.51,619.7 18.13,614.82 10.98,607.05 4.12,597.45 -1.43,584.98 -4.37,569.11 -3.27,568.99 -4.45,564.54 -4.44,552.93 -4.81,551.0 -3.96,537.92 -1.1,518.96 4.94,499.74 6.57,498.24 8.86,491.19 7.83,507.8 10.65,484.93 18.76,472.57 27.45,462.47 39.35,453.41 52.95,447.16 75.01,444.08 71.29,446.21 79.38,443.87 105.41,444.95 105.39,444.96 119.55,445.61 133.69,446.25 154.22,447.15" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 35 Road 35</title></polygon><polygon class="road-poly" data-road-id="39" data-road-name="Road 39" points="48.71,594.18 47.4,593.22 42.32,589.37 42.52,589.13 38.86,584.14 38.03,584.87 34.38,579.89 31.86,574.24 30.61,568.19 30.0,562.03 30.44,562.0 30.53,551.98 30.53,551.97 30.72,531.62 30.91,511.28 30.91,510.5 30.91,510.5 30.93,508.14 30.94,507.35 31.12,487.06 31.3,466.77 31.63,449.76 31.48,449.75 31.81,432.74 32.31,415.73 32.98,398.73 33.74,381.73 33.8,381.73 33.8,381.7 33.8,381.7 34.34,370.86 35.22,355.67 35.12,355.66 36.49,332.8 71.42,334.91 70.05,357.6 70.16,357.45 69.27,372.77 68.74,383.44 68.74,383.44 46.83,414.2 68.68,383.41 67.93,400.2 67.27,416.94 66.78,433.59 66.47,450.13 66.61,450.13 66.29,467.24 66.11,487.37 65.93,507.66 65.92,508.45 65.9,510.81 65.9,510.82 65.89,511.6 65.7,531.95 65.52,552.29 65.52,552.3 65.38,563.86 64.97,561.1 65.19,562.91 65.16,563.5 64.63,562.32 62.11,559.48 62.94,558.76 71.7,569.82 64.83,562.58 68.43,565.27 69.32,565.91" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 39 Road 39</title></polygon><polygon class="road-poly" data-road-id="40" data-road-name="Road 40" points="36.49,332.8 35.12,355.66 34.3,370.86 34.34,370.86 33.8,381.7 33.8,381.7 33.8,381.73 33.12,398.73 32.98,398.73 32.31,415.73 31.81,432.74 31.48,449.75 31.25,466.77 31.3,466.77 31.12,487.06 30.94,507.35 30.93,508.14 30.93,508.14 30.91,510.5 30.91,511.28 30.72,531.62 30.53,551.97 30.53,551.98 30.44,562.0 31.7,568.07 30.61,568.19 31.86,574.24 34.38,579.89 38.03,584.87 42.21,589.44 42.52,589.13 47.87,592.59 47.4,593.22 48.71,594.18 28.1,622.45 16.48,609.59 25.37,619.38 25.51,619.7 18.13,614.82 10.98,607.05 4.12,597.45 -1.43,584.98 -4.37,569.11 -3.27,568.99 -4.45,564.54 -4.45,551.65 -4.45,551.65 -4.26,531.3 -4.08,510.96 -4.07,510.18 -4.05,507.82 -4.05,507.82 -4.04,507.04 -3.86,486.75 -3.68,466.56 -3.74,466.4 -3.5,449.17 -3.17,431.89 -2.66,414.53 -1.96,397.05 -1.82,397.05 -1.16,380.35 -1.14,379.96 -1.14,379.96 -0.61,369.26 -0.64,369.07 0.19,353.64 1.57,330.69" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 40 Road 40</title></polygon><polygon class="road-poly" data-road-id="45" data-road-name="Road 45" points="355.69,334.83 354.5,353.44 353.31,372.06 352.19,388.32 353.47,404.16 351.6,401.37 353.37,415.83 359.19,430.69 363.91,439.75 357.72,430.99 373.22,447.27 371.13,449.01 373.54,450.8 378.4,453.77 385.82,455.98 394.77,457.8 391.71,456.49 413.79,458.17 434.02,459.76 454.25,461.34 454.26,461.34 475.82,463.03 497.38,464.72 503.08,465.17 500.35,500.05 494.64,499.6 473.08,497.91 451.52,496.22 451.52,496.22 431.29,494.64 411.06,493.05 390.83,491.47 390.67,492.54 377.02,489.84 363.81,485.56 351.96,478.33 342.11,468.55 344.21,466.82 334.34,457.01 333.69,457.38 327.06,444.54 319.43,424.31 316.65,402.87 318.51,402.83 317.2,388.44 318.39,369.83 319.59,351.21 320.78,332.59" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 45 Road 45</title></polygon><polygon class="road-poly" data-road-id="46" data-road-name="Road 46" points="320.78,332.59 319.59,351.21 318.39,369.83 317.2,388.44 318.51,402.83 316.65,402.87 319.43,424.31 327.06,444.54 333.69,457.38 334.34,457.01 344.21,466.82 342.11,468.55 351.96,478.33 363.81,485.56 377.02,489.84 390.67,492.54 390.83,491.47 411.06,493.05 431.29,494.64 451.52,496.22 451.52,496.22 473.08,497.91 494.64,499.6 500.35,500.05 497.63,534.93 491.91,534.48 470.35,532.79 448.79,531.1 448.78,531.1 428.55,529.52 408.33,527.93 389.96,526.44 386.57,527.29 368.22,523.7 349.22,517.36 330.37,505.87 313.09,488.08 315.19,486.37 310.96,483.04 303.47,475.0 294.94,458.39 285.49,432.8 281.7,404.38 283.55,401.49 282.22,388.56 283.48,367.59 284.67,348.97 285.86,330.36" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 46 Road 46</title></polygon><polygon class="road-poly" data-road-id="50" data-road-name="Road 50" points="355.69,334.83 354.65,351.12 353.6,367.41 352.51,384.4 351.2,396.15 351.59,397.04 349.1,417.36 345.31,437.07 342.3,450.24 341.84,451.25 337.5,465.18 332.11,471.29 337.05,464.75 326.61,489.73 316.61,501.08 304.52,510.18 290.84,516.65 277.45,520.02 258.91,522.38 247.33,519.22 251.69,520.69 251.68,520.69 244.47,520.46 230.24,519.99 216.1,519.5 216.11,519.53 202.63,519.06 203.85,484.1 217.24,484.56 217.24,484.53 231.43,485.02 245.62,485.5 252.81,485.73 252.82,485.73 257.96,485.89 258.07,487.4 271.36,485.57 279.16,483.67 286.43,480.23 292.85,475.4 298.16,469.38 302.15,462.4 298.74,460.79 306.17,449.62 308.14,441.85 308.32,441.9 311.06,429.96 314.54,411.92 316.77,393.69 316.3,393.65 317.65,381.47 318.69,365.18 319.73,348.88 320.78,332.59" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 50 Road 50</title></polygon><polygon class="road-poly" data-road-id="51" data-road-name="Road 51" points="320.78,332.59 319.73,348.88 318.69,365.18 317.65,381.47 316.3,393.65 316.77,393.69 314.54,411.92 311.06,429.96 308.32,441.9 308.14,441.85 306.17,449.62 298.74,460.79 302.15,462.4 298.16,469.38 292.85,475.4 286.43,480.23 279.16,483.67 271.36,485.57 258.07,487.4 257.96,485.89 252.82,485.73 252.81,485.73 245.62,485.5 231.43,485.02 217.24,484.53 217.24,484.56 203.85,484.1 205.08,449.13 218.37,449.6 218.38,449.56 232.62,450.06 246.77,450.53 253.94,450.76 253.94,450.76 268.6,452.56 257.22,452.43 265.26,451.12 267.49,450.69 268.34,450.29 269.08,449.73 269.7,449.02 267.24,460.05 265.37,450.29 274.83,434.07 274.44,432.46 274.35,433.56 276.8,422.85 279.98,406.48 281.95,390.34 281.41,391.14 282.78,378.54 283.78,362.94 284.82,346.65 285.86,330.36" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 51 Road 51</title></polygon><polygon class="road-poly" data-road-id="55" data-road-name="Road 55" points="497.62,534.93 491.91,534.48 491.91,534.48 470.35,532.79 448.79,531.1 448.79,531.1 448.98,531.12 428.94,529.68 428.95,529.57 409.43,528.18 389.82,526.91 370.14,525.79 350.41,524.72 350.69,524.78 330.6,523.86 330.6,523.79 310.94,522.89 291.22,522.07 271.45,521.35 251.66,520.66 251.83,520.7 244.47,520.46 230.24,519.99 216.1,519.5 216.11,519.53 202.63,519.06 203.85,484.1 217.24,484.56 217.24,484.53 231.43,485.02 245.62,485.5 252.81,485.73 252.82,485.7 272.7,486.38 292.58,487.12 312.46,487.94 332.34,488.85 332.33,488.92 352.21,489.83 352.21,489.79 372.08,490.85 391.94,491.99 411.79,493.27 431.64,494.69 431.63,494.8 451.48,496.22 451.52,496.22 451.52,496.22 473.08,497.91 494.64,499.6 494.64,499.6 500.35,500.05" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 55 Road 55</title></polygon><polygon class="road-poly" data-road-id="56" data-road-name="Road 56" points="205.08,449.13 218.43,449.6 232.59,450.07 246.76,450.54 246.71,450.53 253.94,450.76 254.1,450.77 273.85,451.49 273.85,451.42 293.95,452.16 313.98,452.98 333.98,453.9 353.94,454.86 354.26,454.91 373.87,456.03 373.88,455.92 394.06,457.07 414.16,458.37 434.19,459.8 454.17,461.29 477.36,472.68 454.26,461.34 454.26,461.34 475.82,463.03 497.38,464.72 503.08,465.17 500.35,500.05 494.64,499.6 473.08,497.91 451.52,496.22 451.52,496.22 451.48,496.22 451.48,496.17 431.64,494.69 411.79,493.27 391.94,491.99 372.08,490.85 372.07,490.97 352.21,489.83 352.21,489.8 332.34,488.85 312.46,487.94 292.58,487.12 272.7,486.38 272.7,486.46 252.81,485.73 252.81,485.73 245.62,485.5 245.62,485.5 231.43,485.03 217.24,484.56 203.85,484.1" fill="#e9f2ff" stroke="#88a" stroke-width="0.8"><title>road 56 Road 56</title></polygon><polyline class="road-line" data-road-id="0" data-road-name="Road 0" points="770.0,440.28 769.68,436.42 769.8,436.41 766.81,420.99 760.4,406.66 750.91,394.14 738.83,384.11 721.27,372.63" fill="none" stroke="#444" stroke-width="1"><title>center 0</title></polyline><polyline class="road-line" data-road-id="1" data-road-name="Road 1" points="249.08,614.24 249.08,614.24 265.34,615.28 265.34,615.25 281.6,616.29 297.86,617.37 314.12,618.47 330.38,619.6 330.38,619.61 346.63,620.79 346.63,620.76 362.89,621.94 379.14,623.15 395.39,624.39 411.63,625.66 411.63,625.67 411.64,625.67" fill="none" stroke="#444" stroke-width="1"><title>center 1</title></polyline><polyline class="road-line" data-road-id="2" data-road-name="Road 2" points="324.88,268.58 323.51,289.92 322.14,311.26 320.78,332.59" fill="none" stroke="#444" stroke-width="1"><title>center 2</title></polyline><polyline class="road-line" data-road-id="3" data-road-name="Road 3" points="661.44,643.86 673.15,643.64 673.15,644.32 690.7,643.69 708.1,641.24 719.61,639.0 719.55,638.74 725.32,637.41 735.88,630.91 737.22,633.98 742.88,631.09 747.98,627.29" fill="none" stroke="#444" stroke-width="1"><title>center 3</title></polyline><polyline class="road-line" data-road-id="4" data-road-name="Road 4" points="203.85,484.1 186.8,483.47 169.75,482.8 152.7,482.1" fill="none" stroke="#444" stroke-width="1"><title>center 4</title></polyline><polyline class="road-line" data-road-id="5" data-road-name="Road 5" points="249.08,614.24 232.57,613.27 232.58,613.23 216.07,612.25 199.57,611.32 183.06,610.44 166.56,609.58 166.56,609.6 150.18,608.77 133.81,607.94 122.84,607.17 122.83,607.34 106.37,606.11 89.96,604.41 79.04,603.12" fill="none" stroke="#444" stroke-width="1"><title>center 5</title></polyline><polyline class="road-line" data-road-id="6" data-road-name="Road 6" points="500.35,500.05 509.49,500.76 509.49,500.76 531.75,502.47 554.02,504.14 568.87,505.24 568.87,505.23 590.38,506.81 611.88,508.38 633.39,509.96 654.9,511.53 676.4,513.11" fill="none" stroke="#444" stroke-width="1"><title>center 6</title></polyline><polyline class="road-line" data-road-id="7" data-road-name="Road 7" points="111.0,188.58 101.33,187.99 92.96,189.11 92.89,187.75 84.53,188.86 76.55,191.57 69.23,195.76 62.35,200.65 62.68,201.09 57.48,207.74 56.48,206.82 51.29,213.47 47.47,220.99 45.17,229.1 43.66,237.42 44.19,237.49 42.59,256.64 41.0,275.79 39.4,294.94" fill="none" stroke="#444" stroke-width="1"><title>center 7</title></polyline><polyline class="road-line" data-road-id="8" data-road-name="Road 8" points="219.22,125.61 218.16,131.99 218.93,132.07 217.0,141.57 213.11,150.43 209.89,156.05 209.63,155.89 201.73,167.63 193.2,175.09 195.0,176.74 188.8,182.53 181.59,187.02 173.65,190.02 165.28,191.42 153.97,192.2 153.95,191.22 132.48,189.9 111.01,188.58" fill="none" stroke="#444" stroke-width="1"><title>center 8</title></polyline><polyline class="road-line" data-road-id="9" data-road-name="Road 9" points="79.05,603.05 70.94,602.01 64.82,600.27 64.65,601.04 56.33,598.43 48.71,594.18" fill="none" stroke="#444" stroke-width="1"><title>center 9</title></polyline><polyline class="road-line" data-road-id="10" data-road-name="Road 10" points="39.4,294.94 38.26,310.12 38.15,310.11 36.49,332.8" fill="none" stroke="#444" stroke-width="1"><title>center 10</title></polyline><polyline class="road-line" data-road-id="11" data-road-name="Road 11" points="661.44,643.86 642.05,642.88 622.67,641.9 603.28,640.92 583.9,639.94 564.78,638.74 564.76,638.93 545.64,637.73 526.54,636.29 507.45,634.61 488.37,632.82 488.38,632.74 469.72,630.87 458.11,629.77 458.12,629.72 440.7,628.09 423.27,626.6 411.64,625.65" fill="none" stroke="#444" stroke-width="1"><title>center 11</title></polyline><polyline class="road-line" data-road-id="12" data-road-name="Road 12" points="720.21,374.47 707.4,367.38 695.87,358.37 694.26,360.99 677.55,346.82 664.63,329.13 656.22,308.9 652.79,287.26 653.39,272.63 653.98,258.0 654.75,258.08 657.15,238.09 659.55,218.1 661.95,198.12 664.35,178.13 666.75,158.14 667.04,144.92 664.76,131.9 668.18,131.79 665.16,116.25 658.61,101.84 648.9,89.34 636.56,79.44 622.26,72.66 609.38,69.67 596.51,66.69" fill="none" stroke="#444" stroke-width="1"><title>center 12</title></polyline><polyline class="road-line" data-road-id="13" data-road-name="Road 13" points="596.36,67.53 579.57,65.71 579.6,65.4 562.81,63.58 545.97,62.14 529.11,61.07 512.24,60.2 512.23,60.33 512.12,60.32 495.24,59.51 495.23,59.62 478.35,58.81 461.47,57.87 444.6,56.81 427.73,55.68" fill="none" stroke="#444" stroke-width="1"><title>center 13</title></polyline><polyline class="road-line" data-road-id="15" data-road-name="Road 15" points="676.4,513.11 699.17,512.24 721.19,506.38 741.37,495.8 741.45,495.75 751.43,487.44 759.56,477.31 765.51,465.75 769.04,453.25 770.0,440.29" fill="none" stroke="#444" stroke-width="1"><title>center 15</title></polyline><polyline class="road-line" data-road-id="16" data-road-name="Road 16" points="676.41,513.11 699.18,512.24 721.19,506.38 741.37,495.8 741.45,495.75 751.43,487.44 759.57,477.3 765.51,465.75 769.04,453.24 770.0,440.28" fill="none" stroke="#444" stroke-width="1"><title>center 16</title></polyline><polyline class="road-line" data-road-id="19" data-road-name="Road 19" points="747.98,627.29 753.47,621.28 757.56,614.23 760.05,606.47 762.57,594.33 761.23,594.14 761.73,582.06 761.73,582.05 754.78,562.63 761.25,561.46 758.0,549.55 752.1,538.69 743.88,529.48 733.77,522.38 722.3,517.79 702.4,512.38 701.9,514.98 689.15,514.04 676.4,513.11" fill="none" stroke="#444" stroke-width="1"><title>center 19</title></polyline><polyline class="road-line" data-road-id="20" data-road-name="Road 20" points="676.4,513.11 689.15,514.04 701.9,514.98 720.41,524.09 722.3,517.79 733.77,522.38 743.88,529.48 752.1,538.69 758.0,549.55 761.25,561.46 764.36,581.85 761.73,582.06 761.23,594.14 756.78,605.72 760.05,606.47 757.56,614.23 753.47,621.28 747.98,627.29" fill="none" stroke="#444" stroke-width="1"><title>center 20</title></polyline><polyline class="road-line" data-road-id="23" data-road-name="Road 23" points="747.98,627.29 753.47,621.28 757.56,614.23 760.05,606.47 762.57,594.33 761.23,594.14 761.73,582.06 761.73,582.05 762.78,560.91 762.63,560.91 763.67,539.76 764.9,518.63 766.31,497.51 767.8,476.4 767.86,476.4 768.8,463.98 769.29,457.37 767.12,440.4" fill="none" stroke="#444" stroke-width="1"><title>center 23</title></polyline><polyline class="road-line" data-road-id="24" data-road-name="Road 24" points="747.98,627.29 753.47,621.28 757.56,614.23 760.05,606.47 762.57,594.33 761.23,594.14 761.73,582.06 761.73,582.05 762.78,560.91 762.63,560.91 763.67,539.76 764.9,518.63 766.31,497.51 767.8,476.4 767.86,476.4 768.8,463.98 769.29,457.37 767.12,440.4" fill="none" stroke="#444" stroke-width="1"><title>center 24</title></polyline><polyline class="road-line" data-road-id="29" data-road-name="Road 29" points="36.49,332.8 35.12,355.66 34.3,370.86 34.34,370.86 33.8,381.7 33.8,381.7 34.21,393.66 33.37,393.66 34.37,411.56 37.62,429.2 40.52,440.8 40.84,440.72 42.0,444.64 48.85,454.72 46.05,456.12 50.88,463.85 57.35,470.27 65.13,475.03 73.79,477.87 85.73,480.3 85.9,479.06 103.76,479.9 103.77,479.9 117.95,480.55 132.13,481.17 132.13,481.2 152.7,482.1" fill="none" stroke="#444" stroke-width="1"><title>center 29</title></polyline><polyline class="road-line" data-road-id="30" data-road-name="Road 30" points="152.7,482.1 132.13,481.2 117.95,480.55 103.77,479.9 103.76,479.9 85.9,479.06 74.48,474.82 73.79,477.87 65.13,475.03 57.35,470.27 50.88,463.85 46.05,456.12 40.84,445.1 42.0,444.64 40.84,440.72 38.43,429.0 37.62,429.2 34.37,411.56 33.37,393.66 33.46,381.7 33.8,381.7 34.34,370.86 35.22,355.67 35.12,355.66 36.49,332.8" fill="none" stroke="#444" stroke-width="1"><title>center 30</title></polyline><polyline class="road-line" data-road-id="34" data-road-name="Road 34" points="48.71,594.18 47.4,593.22 42.32,589.37 42.52,589.13 38.86,584.14 38.03,584.87 34.38,579.89 31.86,574.24 30.61,568.19 30.0,562.03 30.44,562.0 30.53,551.98 30.53,551.97 31.72,541.89 30.81,541.83 33.0,526.79 37.59,512.31 41.44,502.92 41.77,503.07 42.31,501.92 48.84,494.73 46.9,493.37 51.58,487.8 57.36,483.4 63.97,480.36 71.08,478.85 80.75,477.87 80.79,478.82 103.76,479.9 103.77,479.9 117.95,480.55 132.13,481.17 132.13,481.2 152.7,482.1" fill="none" stroke="#444" stroke-width="1"><title>center 34</title></polyline><polyline class="road-line" data-road-id="35" data-road-name="Road 35" points="152.7,482.1 132.13,481.2 117.95,480.55 103.77,479.9 103.76,479.9 80.79,478.82 71.37,481.2 71.08,478.85 63.97,480.36 57.36,483.4 51.58,487.8 46.9,493.37 41.49,501.44 42.31,501.92 41.77,503.07 38.44,512.65 37.59,512.31 33.0,526.79 30.81,541.83 30.17,551.95 30.53,551.98 30.44,562.0 31.7,568.07 30.61,568.19 31.86,574.24 34.38,579.89 38.03,584.87 42.21,589.44 42.52,589.13 47.87,592.59 47.4,593.22 48.71,594.18" fill="none" stroke="#444" stroke-width="1"><title>center 35</title></polyline><polyline class="road-line" data-road-id="39" data-road-name="Road 39" points="48.71,594.18 47.4,593.22 42.32,589.37 42.52,589.13 38.86,584.14 38.03,584.87 34.38,579.89 31.86,574.24 30.61,568.19 30.0,562.03 30.44,562.0 30.53,551.98 30.53,551.97 30.72,531.62 30.91,511.28 30.91,510.5 30.91,510.5 30.93,508.14 30.94,507.35 31.12,487.06 31.3,466.77 31.63,449.76 31.48,449.75 31.81,432.74 32.31,415.73 32.98,398.73 33.74,381.73 33.8,381.73 33.8,381.7 33.8,381.7 34.34,370.86 35.22,355.67 35.12,355.66 36.49,332.8" fill="none" stroke="#444" stroke-width="1"><title>center 39</title></polyline><polyline class="road-line" data-road-id="40" data-road-name="Road 40" points="36.49,332.8 35.12,355.66 34.3,370.86 34.34,370.86 33.8,381.7 33.8,381.7 33.8,381.73 33.12,398.73 32.98,398.73 32.31,415.73 31.81,432.74 31.48,449.75 31.25,466.77 31.3,466.77 31.12,487.06 30.94,507.35 30.93,508.14 30.93,508.14 30.91,510.5 30.91,511.28 30.72,531.62 30.53,551.97 30.53,551.98 30.44,562.0 31.7,568.07 30.61,568.19 31.86,574.24 34.38,579.89 38.03,584.87 42.21,589.44 42.52,589.13 47.87,592.59 47.4,593.22 48.71,594.18" fill="none" stroke="#444" stroke-width="1"><title>center 40</title></polyline><polyline class="road-line" data-road-id="45" data-road-name="Road 45" points="320.78,332.59 319.59,351.21 318.39,369.83 317.2,388.44 318.51,402.83 316.65,402.87 319.43,424.31 327.06,444.54 333.69,457.38 334.34,457.01 344.21,466.82 342.11,468.55 351.96,478.33 363.81,485.56 377.02,489.84 390.67,492.54 390.83,491.47 411.06,493.05 431.29,494.64 451.52,496.22 451.52,496.22 473.08,497.91 494.64,499.6 500.35,500.05" fill="none" stroke="#444" stroke-width="1"><title>center 45</title></polyline><polyline class="road-line" data-road-id="46" data-road-name="Road 46" points="320.78,332.59 319.59,351.21 318.39,369.83 317.2,388.44 318.51,402.83 316.65,402.87 319.43,424.31 327.06,444.54 333.69,457.38 334.34,457.01 344.21,466.82 342.11,468.55 351.96,478.33 363.81,485.56 377.02,489.84 390.67,492.54 390.83,491.47 411.06,493.05 431.29,494.64 451.52,496.22 451.52,496.22 473.08,497.91 494.64,499.6 500.35,500.05" fill="none" stroke="#444" stroke-width="1"><title>center 46</title></polyline><polyline class="road-line" data-road-id="50" data-road-name="Road 50" points="320.78,332.59 319.73,348.88 318.69,365.18 317.65,381.47 316.3,393.65 316.77,393.69 314.54,411.92 311.06,429.96 308.32,441.9 308.14,441.85 306.17,449.62 298.74,460.79 302.15,462.4 298.16,469.38 292.85,475.4 286.43,480.23 279.16,483.67 271.36,485.57 258.07,487.4 257.96,485.89 252.82,485.73 252.81,485.73 245.62,485.5 231.43,485.02 217.24,484.53 217.24,484.56 203.85,484.1" fill="none" stroke="#444" stroke-width="1"><title>center 50</title></polyline><polyline class="road-line" data-road-id="51" data-road-name="Road 51" points="320.78,332.59 319.73,348.88 318.69,365.18 317.65,381.47 316.3,393.65 316.77,393.69 314.54,411.92 311.06,429.96 308.32,441.9 308.14,441.85 306.17,449.62 298.74,460.79 302.15,462.4 298.16,469.38 292.85,475.4 286.43,480.23 279.16,483.67 271.36,485.57 258.07,487.4 257.96,485.89 252.82,485.73 252.81,485.73 245.62,485.5 231.43,485.02 217.24,484.53 217.24,484.56 203.85,484.1" fill="none" stroke="#444" stroke-width="1"><title>center 51</title></polyline><polyline class="road-line" data-road-id="55" data-road-name="Road 55" points="500.35,500.05 494.64,499.6 494.64,499.6 473.08,497.91 451.52,496.22 451.52,496.22 451.48,496.22 431.63,494.8 431.64,494.69 411.79,493.27 391.94,491.99 372.08,490.85 352.21,489.79 352.21,489.83 332.33,488.92 332.34,488.85 312.46,487.94 292.58,487.12 272.7,486.38 252.82,485.7 252.81,485.73 245.62,485.5 231.43,485.02 217.24,484.53 217.24,484.56 203.85,484.1" fill="none" stroke="#444" stroke-width="1"><title>center 55</title></polyline><polyline class="road-line" data-road-id="56" data-road-name="Road 56" points="203.85,484.1 217.24,484.56 231.43,485.03 245.62,485.5 245.62,485.5 252.81,485.73 252.81,485.73 272.7,486.46 272.7,486.38 292.58,487.12 312.46,487.94 332.34,488.85 352.21,489.8 352.21,489.83 372.07,490.97 372.08,490.85 391.94,491.99 411.79,493.27 431.64,494.69 451.48,496.17 451.48,496.22 451.52,496.22 451.52,496.22 473.08,497.91 494.64,499.6 500.35,500.05" fill="none" stroke="#444" stroke-width="1"><title>center 56</title></polyline>      </g>
    </svg>
  </div>
  <div class="info" id="info-panel">
    <h4>Map Info</h4>
    <div id="info-content">点击道路或转弯口查看信息。</div>
    <div style="margin-top:8px;color:#666;font-size:12px">Radius = 3 + min(36, 0.9 * cube_root(volume[m^3])) — default height when missing: 1.0 m<br/>Volume source shown when available.</div>
    <div style="margin-top:12px;color:#666;font-size:12px">Generated by opendrive_parser.py</div>
  </div>
</div>
<script>
  // small, safe interactive helpers
  var roadJunctions = {};
  var svg = document.getElementById('map-svg');
  var mapLayer = document.getElementById('map-layer');
  var infoContent = document.getElementById('info-content');
  function clearSelection(){
    document.querySelectorAll('.road-poly.selected').forEach(function(el){ el.classList.remove('selected'); });
  }
  function showRoadInfo(id,name){
    var html = '<b>Road ID:</b> ' + id + '<br/>' + '<b>Name:</b> ' + (name||'<无名称>') + '<br/>';
    var juncs = roadJunctions[id] || [];
    if (juncs.length === 0) html += '<b>关联 junction:</b> 无'; else { html += '<b>关联 junction:</b><ul>'; for(var i=0;i<juncs.length;i++){ html += '<li>' + (juncs[i].name||('J'+juncs[i].id)) + ' (id=' + juncs[i].id + ')</li>'; } html += '</ul>'; }
    infoContent.innerHTML = html;
  }
  // attach click handlers
  mapLayer.querySelectorAll('.road-poly').forEach(function(el){
    el.style.cursor = 'pointer';
    el.addEventListener('click', function(evt){ evt.stopPropagation(); clearSelection(); el.classList.add('selected'); showRoadInfo(el.getAttribute('data-road-id'), el.getAttribute('data-road-name')); });
  });
  mapLayer.querySelectorAll('.junction').forEach(function(el){
    el.addEventListener('click', function(evt){ evt.stopPropagation(); var jid = el.getAttribute('data-junction-id'); var jn = el.getAttribute('data-junction-name'); infoContent.innerHTML = '<b>Junction ID:</b> ' + jid + '<br/><b>Name:</b> ' + (jn||'<无名称>'); });
  });
  // object click handlers
  mapLayer.querySelectorAll('.xodr-object').forEach(function(el){
    el.style.cursor = 'pointer';
    el.addEventListener('click', function(evt){
      evt.stopPropagation();
      // clear previous object selection
      document.querySelectorAll('.xodr-object.selected').forEach(function(x){ x.classList.remove('selected'); });
      el.classList.add('selected');
      var parent = el.parentElement || el;
      var raw = parent.getAttribute('data-raw') || el.getAttribute('data-raw') || '{}';
      var parsed = null;
      try { parsed = JSON.parse(raw); } catch(e) { parsed = raw; }
      var html = '<b>Object ID:</b> ' + (el.getAttribute('data-obj-id')||'<no-id>') + '<br/>' +
                 '<b>Name:</b> ' + (el.getAttribute('data-obj-name')||'<无名称>') + '<br/>' +
                 '<b>Type:</b> ' + (el.getAttribute('data-obj-type')||'') + '<br/>' +
                 '<b>Elem Tag:</b> ' + (el.getAttribute('data-elem-tag')||'') + '<br/>' +
                 '<b>Road:</b> ' + (el.getAttribute('data-road-id')||'') + '<br/>' +
                 '<pre style="white-space:pre-wrap">' + (typeof parsed === 'string' ? parsed : JSON.stringify(parsed, null, 2)) + '</pre>';
      infoContent.innerHTML = html;
    });
  });
  // simple viewBox zoom helpers
  var vb = {x:0,y:0,w:800,h:700};
  function setViewBox(){ svg.setAttribute('viewBox', vb.x + ' ' + vb.y + ' ' + vb.w + ' ' + vb.h); }
  document.getElementById('zoom-in').addEventListener('click', function(){ vb.w *= 0.8; vb.h *= 0.8; vb.x += vb.w*0.1; vb.y += vb.h*0.1; setViewBox(); });
  document.getElementById('zoom-out').addEventListener('click', function(){ vb.x -= vb.w*0.1; vb.y -= vb.h*0.1; vb.w /= 0.8; vb.h /= 0.8; setViewBox(); });
  function fitToContent(padPx){
    padPx = (padPx === undefined) ? 20 : padPx;
    try {
      var bbox = mapLayer.getBBox();
      var bw = bbox.width || 1;
      var bh = bbox.height || 1;
      var pad = padPx;
      var targetW = bw + pad * 2;
      var targetH = bh + pad * 2;
      var rect = svg.getBoundingClientRect();
      var svgRatio = rect.width / rect.height || (800/700);
      var contentRatio = targetW / targetH;
      var finalW = targetW, finalH = targetH;
      if (contentRatio > svgRatio) finalH = targetW / svgRatio; else finalW = targetH * svgRatio;
      // Prevent excessively large initial viewBox for maps with very large coordinates.
      // Clamp finalW/finalH to a reasonable factor relative to the base svg size (800x700).
      var baseW = 800;
      var ratio = finalH / finalW || 1.0;
      var maxFactor = 6.0; // allow zoomed-out at most 6x the base width
      var minFactor = 0.25; // don't zoom in smaller than 0.25x base width
      var factor = finalW / baseW;
      if (factor > maxFactor) { finalW = baseW * maxFactor; finalH = finalW * ratio; }
      if (factor < minFactor) { finalW = baseW * minFactor; finalH = finalW * ratio; }
      vb.x = bbox.x - (finalW - bw)/2 - pad;
      vb.y = bbox.y - (finalH - bh)/2 - pad;
      vb.w = finalW; vb.h = finalH; setViewBox();
    } catch (e) { vb = {x:0,y:0,w:800,h:700}; setViewBox(); }
  }
  document.getElementById('reset-view').addEventListener('click', function(){ fitToContent(); });
  window.addEventListener('load', function(){ setTimeout(fitToContent, 50); });
  window.addEventListener('resize', function(){ setTimeout(fitToContent, 150); });
  // click background clears
  svg.addEventListener('click', function(){ clearSelection(); infoContent.innerHTML = '点击道路或转弯口查看信息。'; });

  // Wheel zoom + drag pan for the existing viewBox-based map
  (function(){
    var svgEl = svg; // uses existing svg variable
    if (!svgEl) return;
    var isDragging = false;
    var dragStart = {x:0,y:0};
    var vbStart = {x:0,y:0};

    function clientToView(x, y, rect) {
      return {
        vx: vb.x + (x - rect.left) * vb.w / rect.width,
        vy: vb.y + (y - rect.top) * vb.h / rect.height
      };
    }

    // Mouse wheel: zoom centered at mouse position
    svgEl.addEventListener('wheel', function(e){
      e.preventDefault();
      var rect = svgEl.getBoundingClientRect();
      var mouse = clientToView(e.clientX, e.clientY, rect);
      var zoomFactor = e.deltaY < 0 ? 0.85 : (1/0.85); // deltaY<0 => zoom in
      var newW = vb.w * zoomFactor;
      var newH = vb.h * zoomFactor;

      // optional limits
      var minW = 40, maxW = 10000;
      if (newW < minW) newW = minW;
      if (newW > maxW) newW = maxW;
      newH = newW * (vb.h / vb.w);

      // keep mouse position stable in view coords
      vb.x = mouse.vx - ((e.clientX - rect.left) * newW / rect.width);
      vb.y = mouse.vy - ((e.clientY - rect.top) * newH / rect.height);
      vb.w = newW; vb.h = newH;
      setViewBox();
    }, { passive: false });

    // Mouse down: start drag (left button)
    svgEl.addEventListener('mousedown', function(e){
      if (e.button !== 0) return;
      isDragging = true;
      dragStart.x = e.clientX;
      dragStart.y = e.clientY;
      vbStart.x = vb.x;
      vbStart.y = vb.y;
      svgEl.style.cursor = 'grabbing';
    });

    // Mouse move: update viewBox while dragging
    window.addEventListener('mousemove', function(e){
      if (!isDragging) return;
      var rect = svgEl.getBoundingClientRect();
      var dxPx = e.clientX - dragStart.x;
      var dyPx = e.clientY - dragStart.y;
      // convert pixel delta to viewBox units (negative to emulate "grab and move map")
      var dx = -dxPx * vb.w / rect.width;
      var dy = -dyPx * vb.h / rect.height;
      vb.x = vbStart.x + dx;
      vb.y = vbStart.y + dy;
      setViewBox();
    });

    // Mouse up: stop dragging
    window.addEventListener('mouseup', function(e){
      if (!isDragging) return;
      isDragging = false;
      svgEl.style.cursor = 'default';
    });

    // Basic touch support: single-finger pan, two-finger pinch-to-zoom (simple)
    var lastTouchDist = null;
    var lastTouchMid = null;
    svgEl.addEventListener('touchstart', function(e){
      if (e.touches.length === 1) {
        var t = e.touches[0];
        isDragging = true;
        dragStart.x = t.clientX;
        dragStart.y = t.clientY;
        vbStart.x = vb.x;
        vbStart.y = vb.y;
      } else if (e.touches.length === 2) {
        lastTouchDist = Math.hypot(
          e.touches[0].clientX - e.touches[1].clientX,
          e.touches[0].clientY - e.touches[1].clientY
        );
        lastTouchMid = {
          x: (e.touches[0].clientX + e.touches[1].clientX) / 2,
          y: (e.touches[0].clientY + e.touches[1].clientY) / 2
        };
      }
    }, { passive: true });

    svgEl.addEventListener('touchmove', function(e){
      if (e.touches.length === 1 && isDragging) {
        var t = e.touches[0];
        var rect = svgEl.getBoundingClientRect();
        var dxPx = t.clientX - dragStart.x;
        var dyPx = t.clientY - dragStart.y;
        vb.x = vbStart.x - dxPx * vb.w / rect.width;
        vb.y = vbStart.y - dyPx * vb.h / rect.height;
        setViewBox();
      } else if (e.touches.length === 2 && lastTouchDist !== null) {
        e.preventDefault();
        var d = Math.hypot(
          e.touches[0].clientX - e.touches[1].clientX,
          e.touches[0].clientY - e.touches[1].clientY
        );
        var rect = svgEl.getBoundingClientRect();
        var mid = {
          x: (e.touches[0].clientX + e.touches[1].clientX) / 2,
          y: (e.touches[0].clientY + e.touches[1].clientY) / 2
        };
        var scale = d / lastTouchDist;
        var mouse = clientToView(mid.x, mid.y, rect);
        var newW = vb.w / scale;
        var newH = vb.h / scale;

        // limits
        var minW = 40, maxW = 10000;
        if (newW < minW) { newW = minW; newH = newW * (vb.h / vb.w); }
        if (newW > maxW) { newW = maxW; newH = newW * (vb.h / vb.w); }

        vb.x = mouse.vx - ((mid.x - rect.left) * newW / rect.width);
        vb.y = mouse.vy - ((mid.y - rect.top) * newH / rect.height);
        vb.w = newW; vb.h = newH;

        lastTouchDist = d;
        lastTouchMid = mid;
        setViewBox();
      }
    }, { passive: false });

    svgEl.addEventListener('touchend', function(e){
      if (e.touches.length === 0) {
        isDragging = false;
        lastTouchDist = null;
        lastTouchMid = null;
      }
    }, { passive: true });
  })();
</script>
</body>
</html>
